# Tooling and Reference Provenance

Checked on: 2026-02-25
Scope: `src/ddPCR`, `src/junctions`, `src/pipelines` (Stage-12 publication path)

## Required CLI tools and versions

- `Rscript`: `Rscript (R) version 4.3.3 (2024-02-29)`
- `bwa`: `Program: bwa (alignment via Burrows-Wheeler transformation) Version: 0.7.17-r1188`
- `samtools`: `samtools 1.19.2`
- `bedtools`: `bedtools v2.30.0`
- `gatk`: `The Genome Analysis Toolkit (GATK) v4.5.0.0`
- `tabix`: `tabix (htslib) 1.19.1`
- `python3`: `Python 3.11.6`

## Required R packages and versions

### Junction workflow (`src/junctions`)

- `GenomicFeatures`: `1.58.0`
- `GenomicRanges`: `1.58.0`
- `GenomeInfoDb`: `1.42.3`
- `Rsamtools`: `2.22.0`
- `Biostrings`: `2.74.1`
- `rtracklayer`: `1.66.0`
- `GenomicAlignments`: `1.42.0`
- `dplyr`: `1.1.4`
- `txdbmaker`: installed in dedicated reproducible env `prnp-junctions` (required by current `GenomicFeatures::makeTxDbFromGFF()` stack)

### Stage-12 pipeline workflow (`src/pipelines/12_*`)

- `dplyr`: `1.1.4`
- `readr`: `2.1.5`
- `stringr`: `1.5.1`
- `tidyr`: `1.3.1`
- `tibble`: `3.2.1`

### ddPCR workflow (`src/ddPCR`)

- `readr`: `2.1.5`
- `magrittr`: `2.0.3`
- `binom`: `1.1.1.1`
- `tidyverse`: **MISSING**
- `openxlsx`: **MISSING**

## Manual install guidance for missing dependencies (not executed)

- Junction blocker (resolved in dedicated env):
  - created env: `conda create -n prnp-junctions ... bioconductor-txdbmaker ...`
  - run command used: `conda activate prnp-junctions && TMPDIR=/tmp bash src/junctions/run_junctions.sh`
- ddPCR missing packages:
  - `conda install -c conda-forge r-tidyverse r-openxlsx`

## Required reference artefacts and provenance notes

| Artifact | Path | Current status | Provenance note |
|---|---|---|---|
| GRCh38 FASTA | `resources/hg38.fa` | Present | Source URL: `https://hgdownload.soe.ucsc.edu/goldenPath/hg38/bigZips/latest/hg38.fa.gz`; local file date: `2024-03-03` |
| Ensembl GTF release 110 | `resources/Homo_sapiens.GRCh38.110.gtf.gz` | Present | Source URL: `https://ftp.ensembl.org/pub/release-110/gtf/homo_sapiens/Homo_sapiens.GRCh38.110.gtf.gz`; local file date: `2023-04-24` |
| Junction FASTA | `resources/junctions/prnp_junctions.fa` | Present | Generated by `src/junctions/01_build_prnp_junction_fasta.R` |
| Junction padded BED | `resources/junctions/PRNP.pad1kb.hg38.bed` | Present | Generated by `src/junctions/02_make_prnp_bed.R` |
| Manual population frequency table | `resources/annotations/manual_population_freq.tsv` | Present | Curator: `Manfredi Carta`; git history dates: created `2026-02-22` (`ffd835d`), header fix `2026-02-22` (`8218429`) |
| gnomAD AF-only resource | `resources/somatic-hg38_af-only-gnomad.hg38.vcf.gz` | Present | Source URI: `gs://gatk-best-practices/somatic-hg38/af-only-gnomad.hg38.vcf.gz`; local file date: `2025-04-19` |
| 1000G PoN resource | `resources/somatic-hg38_1000g_pon.hg38.vcf.gz` | Present | Source URI: `gs://gatk-best-practices/somatic-hg38/1000g_pon.hg38.vcf.gz`; local file date: `2023-11-20` |
| dbSNP resource | `resources/dbsnp_146.hg38.vcf.gz` | Present | Source URI: `gs://genomics-public-data/resources/broad/hg38/v0/dbsnp_146.hg38.vcf.gz`; local file date: `2023-09-03` |
| Mills/1000G indels resource | `resources/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz` | Present | Source URI: `gs://genomics-public-data/resources/broad/hg38/v0/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz`; local file date: `2023-09-03` |

## Notes

- Source URIs above were verified on `2026-02-25`; when original download logs were unavailable, the local file timestamp is recorded as the retrieval/import date proxy.
