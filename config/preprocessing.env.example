# preprocessing.env.example
# Copy to config/preprocessing.env (gitignored) and adjust if needed.

# ---- core paths (repo-relative is recommended) ----
FASTQ_DIR="fastq"                      # raw FASTQs live in FASTQ_DIR/<batch_id>/
RUNS_DIR="runs/preprocessing"           # intermediates/logs
MUTECT2_CONTROLS_OUT_ROOT="runs/mutect2_controls_no_pon" # controls-only Mutect2 outputs
FINAL_BAM_DIR="results/final_bam"      # published BAMs (short sample_id names)
SAMPLES_TSV="config/preprocessing_samples.tsv"

# ---- reference & known-sites for BQSR ----
REF_FASTA="resources/chr2_chr4_chr20.fasta"
REF_DICT="resources/chr2_chr4_chr20.dict"
DBSNP_VCF="resources/dbsnp_146.hg38.vcf.gz"
MILLS_VCF="resources/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz"
FUNCOTATOR_DS="resources/funcotator_data_somatic/funcotator_dataSources.v1.8.hg38.20230908s/hg38"  # Funcotator data sources directory
GNOMAD_AF_VCF="resources/somatic-hg38_af-only-gnomad.hg38.vcf.gz"  # gnomAD AF-only VCF for Stage 7 bcftools annotate

# ---- controls variant-table + QC step ----
VARIANT_QC_ROOT="runs/mutect2_controls_no_pon/variant_qc"
VARIANT_QC_VCF_DIR="runs/mutect2_controls_no_pon/annot_with_gnomad"
VARIANT_QC_READCOUNT_METRICS_DIR="runs/mutect2_controls_no_pon/readcount_qc/metrics"
VARIANT_QC_OUTPUT_DIR="results/mutect2_controls_no_pon/variant_qc"
VARIANT_QC_R_SCRIPT="src/pipelines/6_controls_variant_table_qc_no_pon.R"
MANUAL_POP_FREQ_TSV="resources/annotations/manual_population_freq.tsv"

ENABLE_AAF_FILTER=1
AAF_THRESHOLD=0.0081
MIN_ALT_COUNT=10
MIN_DP=100
MIN_STRAND_ALT=3
MIN_MEAN_BQ=20
MIN_MEAN_MQ=20
MAX_POP_FREQ=0.001
MAX_BINOM_P=1e-6

# ---- controls Panel of Normals (PoN) creation ----
PON_INPUT_DIR="runs/mutect2_controls_no_pon/filtered"
PON_OUTPUT_ROOT="results/mutect2_controls_pon/panel_of_normals"
PON_MERGED_VCF="results/mutect2_controls_pon/panel_of_normals/controls_multisample.filtered.vcf.gz"
PON_VCF="results/mutect2_controls_pon/panel_of_normals/CJD_controls_PoN.vcf.gz"
PON_CONTROLS="Ctrl1 Ctrl2 Ctrl3 Ctrl4 Ctrl5 Ctrl7"

# ---- CJD + dilution Mutect2 with PoN (stage 8) ----
MUTECT2_WITH_PON_OUT_ROOT="runs/mutect2_cjd_dilutions_with_pon"
DILUTION_SAMPLES="NA100_undil NA100_1to10 NA99A1_undil A100_1to2 NA99A1_1to5 NA995A05_undil NA100_1to2"

# ---- trimming adapters ----
ADAPTERS_FA="resources/TruSeq3-PE.fa"

# ---- performance knobs ----
THREADS=8
JAVA_MEM_GB=8

# ---- behaviour ----
FORCE=0      # 1 to overwrite outputs
DRY_RUN=0    # 1 to print commands only
